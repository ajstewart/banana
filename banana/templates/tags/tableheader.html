{% load query_replace %}

{% comment %}
Encloses column-headers with re-ordering hyperlinks (via http query strings)
{% endcomment %}

<th>
    {% with "-"|safe|add:field as antifield %}
        {% if order == antifield %}
             <a href="?{% query_replace 'order' field %}">
        {% else %}
            <a href="?{% query_replace 'order' '-'|safe|add:field %}">
        {% endif %}
        {{ description|safe }}
        {% if order == field %}
            <span class="glyphicon glyphicon-arrow-down"></span>
        {% elif order == antifield %}
            <span class="glyphicon glyphicon-arrow-up"></span>
        {% endif %}
    {% endwith %}
    </a>
</th>